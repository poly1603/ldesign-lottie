# é¡¹ç›®æ¦‚è¿°

<cite>
**æœ¬æ–‡æ¡£ä¸­å¼•ç”¨çš„æ–‡ä»¶**
- [README.md](file://README.md)
- [package.json](file://package.json)
- [packages/core/src/index.ts](file://packages/core/src/index.ts)
- [packages/core/README.md](file://packages/core/README.md)
- [USAGE_GUIDE.md](file://USAGE_GUIDE.md)
- [packages/core/src/core/LottieManager.ts](file://packages/core/src/core/LottieManager.ts)
- [packages/react/src/index.ts](file://packages/react/src/index.ts)
- [packages/vue/src/index.ts](file://packages/vue/src/index.ts)
- [packages/angular/src/index.ts](file://packages/angular/src/index.ts)
- [packages/solid/src/index.ts](file://packages/solid/src/index.ts)
- [packages/core/src/types/index.ts](file://packages/core/src/types/index.ts)
- [packages/core/src/core/WebGLRenderer.ts](file://packages/core/src/core/WebGLRenderer.ts)
- [packages/core/src/core/WASMCore.ts](file://packages/core/src/core/WASMCore.ts)
- [packages/core/src/core/AdaptiveFrameRate.ts](file://packages/core/src/core/AdaptiveFrameRate.ts)
- [examples/react-demo/src/App.tsx](file://examples/react-demo/src/App.tsx)
- [examples/vue-demo/src/App.vue](file://examples/vue-demo/src/App.vue)
- [examples/core-demo/src/main.ts](file://examples/core-demo/src/main.ts)
- [packages/core/src/plugins/KeyboardShortcutsPlugin.ts](file://packages/core/src/plugins/KeyboardShortcutsPlugin.ts)
- [packages/core/src/plugins/WatermarkPlugin.ts](file://packages/core/src/plugins/WatermarkPlugin.ts)
</cite>

## ç›®å½•
1. [é¡¹ç›®ç®€ä»‹](#é¡¹ç›®ç®€ä»‹)
2. [æ ¸å¿ƒç‰¹æ€§](#æ ¸å¿ƒç‰¹æ€§)
3. [æ¶æ„è®¾è®¡](#æ¶æ„è®¾è®¡)
4. [æ¡†æ¶é€‚é…å™¨](#æ¡†æ¶é€‚é…å™¨)
5. [æ€§èƒ½ä¼˜åŒ–](#æ€§èƒ½ä¼˜åŒ–)
6. [é«˜çº§åŠŸèƒ½](#é«˜çº§åŠŸèƒ½)
7. [æ’ä»¶ç³»ç»Ÿ](#æ’ä»¶ç³»ç»Ÿ)
8. [ä½¿ç”¨ç¤ºä¾‹](#ä½¿ç”¨ç¤ºä¾‹)
9. [é…ç½®é€‰é¡¹](#é…ç½®é€‰é¡¹)
10. [æœ€ä½³å®è·µ](#æœ€ä½³å®è·µ)

## é¡¹ç›®ç®€ä»‹

@ldesign/lottie æ˜¯ä¸€ä¸ªåŠŸèƒ½æœ€å®Œæ•´ã€æ€§èƒ½æœ€ä¼˜å¼‚çš„ Lottie åŠ¨ç”»åº“ï¼Œä¸“ä¸ºç°ä»£ Web åº”ç”¨ç¨‹åºè®¾è®¡ã€‚è¯¥é¡¹ç›®æ˜¯ä¸€ä¸ªå®Œæ•´çš„ monorepo æ¶æ„ï¼ŒåŒ…å«äº†æ ¸å¿ƒå¼•æ“ã€å¤šä¸ªæ¡†æ¶é€‚é…å™¨ä»¥åŠä¸°å¯Œçš„ç¤ºä¾‹ä»£ç ã€‚

### é¡¹ç›®ç‰¹ç‚¹

- **å…¨æ¡†æ¶å…¼å®¹**ï¼šæ”¯æŒ Vue 3ã€Reactã€Angularã€Solidã€Svelteã€Qwik å’Œ Lit ç­‰ä¸»æµå‰ç«¯æ¡†æ¶
- **é«˜æ€§èƒ½æ¸²æŸ“**ï¼šæ”¯æŒ SVGã€Canvasã€WebGL å¤šç§æ¸²æŸ“å™¨ï¼Œå…·å¤‡æ™ºèƒ½è·³å¸§å’Œè‡ªé€‚åº”æ€§èƒ½ä¼˜åŒ–
- **AI æ™ºèƒ½ä¼˜åŒ–**ï¼šå†…ç½® AI åˆ†æå’Œè‡ªåŠ¨ä¼˜åŒ–åŠŸèƒ½ï¼Œæ ¹æ®è®¾å¤‡æ€§èƒ½åŠ¨æ€è°ƒæ•´é…ç½®
- **ä¼ä¸šçº§åŠŸèƒ½**ï¼šæä¾›å®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€ç¼“å­˜æœºåˆ¶ã€æ€§èƒ½ç›‘æ§å’Œè°ƒè¯•å·¥å…·

**ç« èŠ‚æ¥æº**
- [README.md](file://README.md#L1-L279)
- [package.json](file://package.json#L1-L83)

## æ ¸å¿ƒç‰¹æ€§

### ğŸš€ æ€§èƒ½ä¼˜åŒ–

é¡¹ç›®å®ç°äº†å¤šå±‚æ¬¡çš„æ€§èƒ½ä¼˜åŒ–ç­–ç•¥ï¼š

```mermaid
graph TB
subgraph "æ€§èƒ½ä¼˜åŒ–å±‚æ¬¡"
A[è®¾å¤‡æ£€æµ‹] --> B[æ¸²æŸ“å™¨é€‰æ‹©]
B --> C[è‡ªé€‚åº”å¸§ç‡]
C --> D[æ™ºèƒ½ç¼“å­˜]
D --> E[WebAssemblyåŠ é€Ÿ]
E --> F[Workeræ± ç®¡ç†]
end
subgraph "ä¼˜åŒ–æŠ€æœ¯"
G[OffscreenCanvas]
H[LRUç¼“å­˜]
I[åŠ¨æ€æ¸²æŸ“å™¨åˆ‡æ¢]
J[å†…å­˜ç®¡ç†]
end
A -.-> G
B -.-> H
C -.-> I
D -.-> J
```

**å›¾è¡¨æ¥æº**
- [packages/core/src/core/LottieManager.ts](file://packages/core/src/core/LottieManager.ts#L69-L85)
- [packages/core/src/core/AdaptiveFrameRate.ts](file://packages/core/src/core/AdaptiveFrameRate.ts#L49-L54)

### ğŸ¨ é«˜çº§åŠŸèƒ½

- **æ—¶é—´çº¿æ§åˆ¶**ï¼šå¤šè½¨é“ã€å…³é”®å¸§ç¼–è¾‘ã€10+ ç¼“åŠ¨å‡½æ•°
- **æ‹–æ‹½äº¤äº’**ï¼šè¾¹ç•Œçº¦æŸã€ç½‘æ ¼å¸é™„ã€æƒ¯æ€§æ•ˆæœ
- **æ•°æ®ç»‘å®š**ï¼šå“åº”å¼æ›´æ–°ã€30+ è½¬æ¢ç®¡é“ã€10+ éªŒè¯å™¨
- **å¤šæ•°æ®æº**ï¼šAPI/WebSocket/SSE/è½®è¯¢å®æ—¶æ•°æ®
- **è°ƒè¯•å·¥å…·**ï¼šå¯è§†åŒ–é¢æ¿ã€æ€§èƒ½åˆ†æã€ç«ç„°å›¾

### ğŸ› ï¸ å¼€å‘ä½“éªŒ

- **TypeScript å®Œæ•´æ”¯æŒ**ï¼š100% ç±»å‹è¦†ç›–ï¼Œå®Œæ•´æ™ºèƒ½æç¤º
- **æ¡†æ¶æ— å…³**ï¼šæ”¯æŒåŸç”Ÿ JavaScript å’Œæ‰€æœ‰ä¸»æµæ¡†æ¶
- **ä¸°å¯Œç¤ºä¾‹**ï¼šå®æˆ˜æ¡ˆä¾‹ã€æ€§èƒ½å¯¹æ¯”ã€æœ€ä½³å®è·µ

**ç« èŠ‚æ¥æº**
- [README.md](file://README.md#L11-L33)

## æ¶æ„è®¾è®¡

### Monorepo ç»“æ„

```mermaid
graph TB
subgraph "Monorepo æ ¸å¿ƒ"
A[packages/core] --> B[æ ¸å¿ƒå¼•æ“]
A --> C[æ¸²æŸ“å™¨]
A --> D[æ€§èƒ½ä¼˜åŒ–]
A --> E[æ’ä»¶ç³»ç»Ÿ]
end
subgraph "æ¡†æ¶é€‚é…å™¨"
F[packages/react]
G[packages/vue]
H[packages/angular]
I[packages/solid]
J[packages/svelte]
K[packages/qwik]
L[packages/lit]
end
subgraph "ç¤ºä¾‹é¡¹ç›®"
M[examples/core-demo]
N[examples/react-demo]
O[examples/vue-demo]
P[examples/angular-demo]
end
A --> F
A --> G
A --> H
A --> I
A --> J
A --> K
A --> L
F --> N
G --> O
H --> P
```

**å›¾è¡¨æ¥æº**
- [package.json](file://package.json#L1-L83)
- [packages/core/src/index.ts](file://packages/core/src/index.ts#L1-L180)

### æ ¸å¿ƒæ¶æ„ç»„ä»¶

```mermaid
classDiagram
class LottieManager {
+create(config) ILottieInstance
+preload(path) Promise~any~
+playAll() void
+pauseAll() void
+getGlobalStats() GlobalPerformanceStats
-normalizeConfig() Required~LottieManagerConfig~
-handleResize() void
}
class LottieInstance {
+id string
+state AnimationState
+play() void
+pause() void
+stop() void
+setSpeed(speed) void
+goToAndPlay(frame) void
+getMetrics() PerformanceMetrics
}
class WebGLRenderer {
+render() void
+setupWebGL() void
+loadShader() Shader
+createTexture() Texture
}
class WASMCore {
+initWASM() Promise~void~
+WASMMatrix matrix
+WASMSIMD simd
+WASMBezier bezier
}
class AdaptiveFrameRate {
+getCurrentFPS() number
+getActualFPS() number
+enable() void
+disable() void
}
LottieManager --> LottieInstance : "ç®¡ç†"
LottieInstance --> WebGLRenderer : "ä½¿ç”¨"
LottieInstance --> WASMCore : "åŠ é€Ÿ"
LottieInstance --> AdaptiveFrameRate : "ä¼˜åŒ–"
```

**å›¾è¡¨æ¥æº**
- [packages/core/src/core/LottieManager.ts](file://packages/core/src/core/LottieManager.ts#L16-L504)
- [packages/core/src/core/WebGLRenderer.ts](file://packages/core/src/core/WebGLRenderer.ts#L67-L200)
- [packages/core/src/core/WASMCore.ts](file://packages/core/src/core/WASMCore.ts#L1-L200)

**ç« èŠ‚æ¥æº**
- [packages/core/src/index.ts](file://packages/core/src/index.ts#L1-L180)
- [packages/core/README.md](file://packages/core/README.md#L1-L43)

## æ¡†æ¶é€‚é…å™¨

### é€‚é…å™¨æ¶æ„

æ¯ä¸ªæ¡†æ¶é€‚é…å™¨éƒ½æä¾›äº†ç»Ÿä¸€çš„ API æ¥å£ï¼Œç¡®ä¿å¼€å‘è€…åœ¨ä¸åŒæ¡†æ¶é—´åˆ‡æ¢æ—¶å…·æœ‰ç›¸åŒçš„å¼€å‘ä½“éªŒï¼š

```mermaid
graph LR
subgraph "æ ¸å¿ƒ API"
A[LottieManager]
B[LottieInstance]
C[é…ç½®ç³»ç»Ÿ]
end
subgraph "æ¡†æ¶é€‚é…å™¨"
D[React Hooks]
E[Vue Composables]
F[Angular Services]
G[Solid Signals]
H[Web Components]
end
A --> D
A --> E
A --> F
A --> G
A --> H
B --> D
B --> E
B --> F
B --> G
B --> H
C --> D
C --> E
C --> F
C --> G
C --> H
```

**å›¾è¡¨æ¥æº**
- [packages/react/src/index.ts](file://packages/react/src/index.ts#L1-L8)
- [packages/vue/src/index.ts](file://packages/vue/src/index.ts#L1-L21)
- [packages/angular/src/index.ts](file://packages/angular/src/index.ts#L1-L27)
- [packages/solid/src/index.ts](file://packages/solid/src/index.ts#L1-L25)

### React é€‚é…å™¨

React é€‚é…å™¨æä¾›äº†ä¸‰ç§ä½¿ç”¨æ–¹å¼ï¼š
- **ç»„ä»¶æ–¹å¼**ï¼š`<Lottie />` å’Œ `<LottiePlayer />`
- **Hook æ–¹å¼**ï¼š`useLottie()` å’Œ `useLottieInteractive()`
- **ä¸Šä¸‹æ–‡æ–¹å¼**ï¼š`LottieProvider` å’Œ `useLottieContext`

### Vue é€‚é…å™¨

Vue é€‚é…å™¨æ”¯æŒ Composition API å’ŒæŒ‡ä»¤è¯­æ³•ï¼š
- **Composable**ï¼š`useLottie()` å’Œ `useLottieInteractive()`
- **ç»„ä»¶**ï¼š`<Lottie />` ç»„ä»¶
- **æŒ‡ä»¤**ï¼š`v-lottie`ã€`v-lottie-hover`ã€`v-lottie-scroll`

**ç« èŠ‚æ¥æº**
- [packages/react/src/index.ts](file://packages/react/src/index.ts#L1-L8)
- [packages/vue/src/index.ts](file://packages/vue/src/index.ts#L1-L21)
- [packages/angular/src/index.ts](file://packages/angular/src/index.ts#L1-L27)

## æ€§èƒ½ä¼˜åŒ–

### è‡ªé€‚åº”å¸§ç‡ç³»ç»Ÿ

é¡¹ç›®å®ç°äº†æ™ºèƒ½çš„è‡ªé€‚åº”å¸§ç‡æ§åˆ¶ç³»ç»Ÿï¼Œèƒ½å¤Ÿæ ¹æ®è®¾å¤‡æ€§èƒ½åŠ¨æ€è°ƒæ•´åŠ¨ç”»å¸§ç‡ï¼š

```mermaid
flowchart TD
A[ç›‘æ§å¸§æ—¶é—´] --> B{è®¡ç®—å®é™…å¸§ç‡}
B --> |ä½äºé˜ˆå€¼| C[é™ä½å¸§ç‡]
B --> |æ¥è¿‘ç›®æ ‡| D[ä¿æŒå½“å‰å¸§ç‡]
B --> |é«˜äºé˜ˆå€¼| E[å°è¯•æå‡å¸§ç‡]
C --> F[è°ƒæ•´æ’­æ”¾é€Ÿåº¦]
D --> F
E --> F
F --> G[åº”ç”¨æ–°çš„å¸§ç‡]
G --> H[è®°å½•è°ƒæ•´å†å²]
H --> A
```

**å›¾è¡¨æ¥æº**
- [packages/core/src/core/AdaptiveFrameRate.ts](file://packages/core/src/core/AdaptiveFrameRate.ts#L49-L328)

### WebAssembly åŠ é€Ÿ

é€šè¿‡ WebAssembly æ¨¡å—æä¾›é«˜æ€§èƒ½çš„æ•°å­¦è®¡ç®—åŠ é€Ÿï¼š

- **çŸ©é˜µè¿ç®—**ï¼šå¹³ç§»ã€æ—‹è½¬ã€ç¼©æ”¾å˜æ¢
- **è´å¡å°”æ›²çº¿**ï¼šäºŒæ¬¡å’Œä¸‰æ¬¡è´å¡å°”æ›²çº¿è®¡ç®—
- **SIMD æ”¯æŒ**ï¼šåˆ©ç”¨ SIMD æŒ‡ä»¤é›†åŠ é€Ÿè®¡ç®—
- **å†…å­˜ç®¡ç†**ï¼šé«˜æ•ˆçš„å†…å­˜åˆ†é…å’Œé‡Šæ”¾

### ç¼“å­˜æœºåˆ¶

å®ç°äº†å¤šå±‚ç¼“å­˜ç­–ç•¥ï¼š

1. **å†…å­˜ç¼“å­˜**ï¼šLRU ç®—æ³•ç®¡ç†çš„å†…å­˜ç¼“å­˜
2. **æŒä¹…åŒ–ç¼“å­˜**ï¼šIndexedDB å­˜å‚¨å¤§å‹åŠ¨ç”»æ•°æ®
3. **æ™ºèƒ½é¢„åŠ è½½**ï¼šåŸºäºç”¨æˆ·è¡Œä¸ºçš„é¢„æµ‹æ€§åŠ è½½

**ç« èŠ‚æ¥æº**
- [packages/core/src/core/AdaptiveFrameRate.ts](file://packages/core/src/core/AdaptiveFrameRate.ts#L49-L328)
- [packages/core/src/core/WASMCore.ts](file://packages/core/src/core/WASMCore.ts#L1-L200)

## é«˜çº§åŠŸèƒ½

### æ—¶é—´çº¿æ§åˆ¶å™¨

æä¾›ç²¾ç¡®çš„æ—¶é—´çº¿æ§åˆ¶åŠŸèƒ½ï¼š

```mermaid
sequenceDiagram
participant User as ç”¨æˆ·
participant TL as TimelineController
participant Instance as LottieInstance
participant Renderer as æ¸²æŸ“å™¨
User->>TL : è®¾ç½®å…³é”®å¸§
TL->>TL : è§£ææ—¶é—´è½´
TL->>Instance : æ’­æ”¾ç‰‡æ®µ
Instance->>Renderer : æ¸²æŸ“å…³é”®å¸§
Renderer-->>User : æ˜¾ç¤ºåŠ¨ç”»
User->>TL : è°ƒæ•´ç¼“åŠ¨å‡½æ•°
TL->>TL : è®¡ç®—æ’å€¼
TL->>Instance : åº”ç”¨ç¼“åŠ¨
Instance->>Renderer : æ¸²æŸ“å¹³æ»‘è¿‡æ¸¡
```

**å›¾è¡¨æ¥æº**
- [packages/core/src/types/index.ts](file://packages/core/src/types/index.ts#L1-L200)

### äº¤äº’æ§åˆ¶å™¨

æ”¯æŒå¤šç§äº¤äº’æ–¹å¼ï¼š

- **é¼ æ ‡äº¤äº’**ï¼šç‚¹å‡»ã€æ‚¬åœã€æ‹–æ‹½
- **è§¦æ‘¸äº¤äº’**ï¼šç§»åŠ¨ç«¯æ‰‹åŠ¿è¯†åˆ«
- **é”®ç›˜æ§åˆ¶**ï¼šå¿«æ·é”®æ“ä½œ
- **æ»šåŠ¨è§¦å‘**ï¼šè§†å£æ£€æµ‹å’Œè‡ªåŠ¨æ’­æ”¾

### æ•°æ®ç»‘å®šç³»ç»Ÿ

æä¾›å¼ºå¤§çš„æ•°æ®ç»‘å®šèƒ½åŠ›ï¼š

- **å“åº”å¼æ›´æ–°**ï¼šè‡ªåŠ¨æ£€æµ‹æ•°æ®å˜åŒ–
- **è½¬æ¢ç®¡é“**ï¼š30+ å†…ç½®è½¬æ¢å™¨
- **éªŒè¯å™¨**ï¼š10+ æ•°æ®éªŒè¯è§„åˆ™
- **å®æ—¶åŒæ­¥**ï¼šWebSocket å’Œ SSE æ”¯æŒ

**ç« èŠ‚æ¥æº**
- [packages/core/src/types/index.ts](file://packages/core/src/types/index.ts#L1-L200)

## æ’ä»¶ç³»ç»Ÿ

### æ’ä»¶æ¶æ„

```mermaid
classDiagram
class PluginManager {
+register(plugin) void
+loadPlugin(instance, name) Promise~void~
+unloadPlugin(instance, name) void
+getInstalledPlugins() string[]
}
class Plugin {
+metadata PluginMetadata
+hooks PluginHooks
+ui PluginUI
+config PluginConfig
}
class WatermarkPlugin {
+setConfig(config) void
+create(container) void
+destroy() void
}
class KeyboardShortcutsPlugin {
+initialize(context, config) void
+updateConfig(config) void
+enable() void
+disable() void
}
PluginManager --> Plugin : "ç®¡ç†"
Plugin <|-- WatermarkPlugin
Plugin <|-- KeyboardShortcutsPlugin
```

**å›¾è¡¨æ¥æº**
- [packages/core/src/plugins/WatermarkPlugin.ts](file://packages/core/src/plugins/WatermarkPlugin.ts#L87-L178)
- [packages/core/src/plugins/KeyboardShortcutsPlugin.ts](file://packages/core/src/plugins/KeyboardShortcutsPlugin.ts#L1-L442)

### å†…ç½®æ’ä»¶

#### æ°´å°æ’ä»¶ (WatermarkPlugin)
- **æ–‡æœ¬æ°´å°**ï¼šæ”¯æŒè‡ªå®šä¹‰æ–‡æœ¬å’Œæ ·å¼
- **å›¾ç‰‡æ°´å°**ï¼šæ”¯æŒ logo å’Œå“ç‰Œæ ‡è¯†
- **ä½ç½®æ§åˆ¶**ï¼šä¹å®«æ ¼ä½ç½®é€‰æ‹©
- **é€æ˜åº¦è°ƒèŠ‚**ï¼šå¯è°ƒèŠ‚æ°´å°é€æ˜åº¦

#### é”®ç›˜å¿«æ·é”®æ’ä»¶ (KeyboardShortcutsPlugin)
- **æ’­æ”¾æ§åˆ¶**ï¼šæ’­æ”¾/æš‚åœã€åœæ­¢ã€å¾ªç¯åˆ‡æ¢
- **é€Ÿåº¦æ§åˆ¶**ï¼šåŠ é€Ÿ/å‡é€Ÿã€å€é€Ÿæ’­æ”¾
- **å¸§æ§åˆ¶**ï¼šè·³è½¬åˆ°æŒ‡å®šå¸§ã€é¦–å°¾å¸§
- **éŸ³é‡æ§åˆ¶**ï¼šé™éŸ³åˆ‡æ¢
- **å…¨å±æ§åˆ¶**ï¼šå…¨å±åˆ‡æ¢

### è‡ªå®šä¹‰æ’ä»¶å¼€å‘

å¼€å‘è€…å¯ä»¥è½»æ¾åˆ›å»ºè‡ªå®šä¹‰æ’ä»¶ï¼š

```typescript
// æ’ä»¶ç¤ºä¾‹ç»“æ„
export const CustomPlugin = createPlugin({
  metadata: {
    name: 'custom-plugin',
    version: '1.0.0',
    description: 'Custom plugin description'
  },
  
  hooks: {
    onInstall(context: PluginContext): void {
      // æ’ä»¶å®‰è£…é€»è¾‘
    },
    
    afterLoad(context: PluginContext): void {
      // åŠ¨ç”»åŠ è½½åé€»è¾‘
    }
  }
})
```

**ç« èŠ‚æ¥æº**
- [packages/core/src/plugins/WatermarkPlugin.ts](file://packages/core/src/plugins/WatermarkPlugin.ts#L87-L178)
- [packages/core/src/plugins/KeyboardShortcutsPlugin.ts](file://packages/core/src/plugins/KeyboardShortcutsPlugin.ts#L1-L442)

## ä½¿ç”¨ç¤ºä¾‹

### åŸºç¡€ä½¿ç”¨

#### åŸç”Ÿ JavaScript
```typescript
import { createLottie } from '@ldesign/lottie'

const animation = createLottie({
  container: '#lottie',
  path: 'animation.json',
  loop: true,
  autoplay: true
})

animation.play()
```

#### React
```typescript
import { useLottie } from '@ldesign/lottie-react'

function App() {
  const { containerRef, play, pause } = useLottie({
    path: 'animation.json',
    loop: true
  })

  return (
    <div>
      <div ref={containerRef} />
      <button onClick={play}>æ’­æ”¾</button>
      <button onClick={pause}>æš‚åœ</button>
    </div>
  )
}
```

#### Vue
```vue
<script setup>
import { useLottie } from '@ldesign/lottie-vue'

const { play, pause } = useLottie({
  path: 'animation.json',
  loop: true
})
</script>

<template>
  <div>
    <button @click="play">æ’­æ”¾</button>
    <button @click="pause">æš‚åœ</button>
  </div>
</template>
```

### é«˜çº§ç”¨æ³•

#### æ€§èƒ½ç›‘æ§
```typescript
const animation = createLottie({
  container: '#lottie',
  path: 'animation.json',
  advanced: {
    enablePerformanceMonitor: true,
    performanceMonitorInterval: 1000
  },
  events: {
    performanceWarning: (metrics) => {
      console.log('FPS:', metrics.fps)
      console.log('å†…å­˜:', metrics.memory, 'MB')
    }
  }
})
```

#### æ™ºèƒ½ç¼“å­˜
```typescript
import { lottieManager } from '@ldesign/lottie'

// é¢„åŠ è½½åŠ¨ç”»
await lottieManager.preload('animation.json')

// åˆ›å»ºå®ä¾‹æ—¶è‡ªåŠ¨ä½¿ç”¨ç¼“å­˜
const animation = createLottie({
  container: '#lottie',
  path: 'animation.json'
})
```

**ç« èŠ‚æ¥æº**
- [examples/react-demo/src/App.tsx](file://examples/react-demo/src/App.tsx#L1-L196)
- [examples/vue-demo/src/App.vue](file://examples/vue-demo/src/App.vue#L1-L123)
- [examples/core-demo/src/main.ts](file://examples/core-demo/src/main.ts#L1-L390)

## é…ç½®é€‰é¡¹

### æ ¸å¿ƒé…ç½®

| é…ç½®é¡¹ | ç±»å‹ | é»˜è®¤å€¼ | æè¿° |
|--------|------|--------|------|
| `container` | `HTMLElement \| string` | - | å®¹å™¨å…ƒç´ æˆ–é€‰æ‹©å™¨ |
| `path` | `string` | - | åŠ¨ç”»æ–‡ä»¶è·¯å¾„ |
| `animationData` | `any` | - | ç›´æ¥ä¼ å…¥åŠ¨ç”»æ•°æ® |
| `renderer` | `'svg' \| 'canvas' \| 'html' \| 'webgl'` | è‡ªåŠ¨æ£€æµ‹ | æ¸²æŸ“å™¨ç±»å‹ |
| `loop` | `boolean \| number` | `false` | å¾ªç¯æ’­æ”¾è®¾ç½® |
| `autoplay` | `boolean` | `false` | æ˜¯å¦è‡ªåŠ¨æ’­æ”¾ |
| `speed` | `number` | `1` | æ’­æ”¾é€Ÿåº¦ |
| `quality` | `'low' \| 'medium' \| 'high' \| 'auto'` | `'auto'` | åŠ¨ç”»è´¨é‡ |

### é«˜çº§é…ç½®

| é…ç½®é¡¹ | ç±»å‹ | é»˜è®¤å€¼ | æè¿° |
|--------|------|--------|------|
| `enablePerformanceMonitor` | `boolean` | `false` | å¯ç”¨æ€§èƒ½ç›‘æ§ |
| `targetFPS` | `number` | `60` | ç›®æ ‡å¸§ç‡ |
| `enableCache` | `boolean` | `true` | å¯ç”¨ç¼“å­˜ |
| `useOffscreenCanvas` | `boolean` | `true` | ä½¿ç”¨ç¦»å±ç”»å¸ƒ |
| `enableSmartFrameSkip` | `boolean` | `true` | å¯ç”¨æ™ºèƒ½è·³å¸§ |

### äº‹ä»¶é…ç½®

| äº‹ä»¶å | å›è°ƒå‚æ•° | æè¿° |
|--------|----------|------|
| `config_ready` | `() => void` | é…ç½®å®Œæˆäº‹ä»¶ |
| `data_ready` | `() => void` | æ•°æ®åŠ è½½å®Œæˆäº‹ä»¶ |
| `complete` | `() => void` | åŠ¨ç”»å®Œæˆäº‹ä»¶ |
| `loopComplete` | `() => void` | å¾ªç¯å®Œæˆäº‹ä»¶ |
| `performanceWarning` | `(metrics: PerformanceMetrics) => void` | æ€§èƒ½è­¦å‘Šäº‹ä»¶ |

**ç« èŠ‚æ¥æº**
- [packages/core/src/types/index.ts](file://packages/core/src/types/index.ts#L1-L200)

## æœ€ä½³å®è·µ

### æ€§èƒ½ä¼˜åŒ–å»ºè®®

1. **é€‰æ‹©åˆé€‚çš„æ¸²æŸ“å™¨**
   - SVGï¼šé«˜è´¨é‡ï¼Œé€‚åˆç®€å•åŠ¨ç”»
   - Canvasï¼šé«˜æ€§èƒ½ï¼Œé€‚åˆå¤æ‚åŠ¨ç”»
   - WebGLï¼šGPUåŠ é€Ÿï¼Œé€‚åˆå¤§å‹åŠ¨ç”»

2. **åˆç†ä½¿ç”¨ç¼“å­˜**
   ```typescript
   // å¯ç”¨å…¨å±€ç¼“å­˜
   const manager = LottieManager.getInstance({
     cache: {
       enabled: true,
       maxSize: 100, // MB
       ttl: 3600000 // 1å°æ—¶
     }
   })
   ```

3. **æ™ºèƒ½é¢„åŠ è½½**
   ```typescript
   // åœ¨ç©ºé—²æ—¶é—´é¢„åŠ è½½
   lottieManager.preloadBatch([
     'animation1.json',
     'animation2.json',
     'animation3.json'
   ])
   ```

4. **ç›‘æ§æ€§èƒ½**
   ```typescript
   const stats = lottieManager.getGlobalStats()
   console.log('æ€»å®ä¾‹æ•°:', stats.totalInstances)
   console.log('å¹³å‡FPS:', stats.averageFps)
   console.log('ç¼“å­˜å‘½ä¸­ç‡:', stats.cacheHitRate)
   ```

### å¼€å‘å»ºè®®

1. **ä½¿ç”¨ TypeScript**
   - åˆ©ç”¨å®Œæ•´çš„ç±»å‹ç³»ç»Ÿ
   - è·å¾—æ™ºèƒ½æç¤ºå’Œç¼–è¯‘æ—¶æ£€æŸ¥
   - æé«˜ä»£ç è´¨é‡å’Œå¯ç»´æŠ¤æ€§

2. **éµå¾ªå‘½åè§„èŒƒ**
   - ä½¿ç”¨è¯­ä¹‰åŒ–çš„å˜é‡å
   - åˆç†ç»„ç»‡ç»„ä»¶ç»“æ„
   - æ·»åŠ é€‚å½“çš„æ³¨é‡Š

3. **é”™è¯¯å¤„ç†**
   ```typescript
   const animation = createLottie({
     container: '#lottie',
     path: 'animation.json',
     events: {
       data_failed: (error) => {
         console.error('åŠ¨ç”»åŠ è½½å¤±è´¥:', error)
         // æ˜¾ç¤ºé”™è¯¯æç¤º
       }
     }
   })
   ```

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

1. **èµ„æºä¼˜åŒ–**
   - ä½¿ç”¨ CDN åŠ é€Ÿ
   - å¯ç”¨ Gzip å‹ç¼©
   - åˆç†è®¾ç½®ç¼“å­˜ç­–ç•¥

2. **ç›‘æ§å’Œè°ƒè¯•**
   - å¯ç”¨æ€§èƒ½ç›‘æ§
   - æ”¶é›†ç”¨æˆ·åé¦ˆ
   - å®šæœŸæ€§èƒ½è¯„ä¼°

3. **æ¸è¿›å¢å¼º**
   - æä¾›é™çº§æ–¹æ¡ˆ
   - æ”¯æŒç¦»çº¿æ¨¡å¼
   - ä¼˜åŒ–é¦–å±åŠ è½½

**ç« èŠ‚æ¥æº**
- [USAGE_GUIDE.md](file://USAGE_GUIDE.md#L308-L346)

## æ€»ç»“

@ldesign/lottie æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§ã€æ€§èƒ½ä¼˜å¼‚çš„ Lottie åŠ¨ç”»è§£å†³æ–¹æ¡ˆï¼Œé€šè¿‡å…¶æ¨¡å—åŒ–çš„æ¶æ„è®¾è®¡å’Œä¸°å¯Œçš„åŠŸèƒ½ç‰¹æ€§ï¼Œä¸ºå¼€å‘è€…æä¾›äº†å®Œæ•´çš„åŠ¨ç”»å¼€å‘ä½“éªŒã€‚æ— è®ºæ˜¯ç®€å•çš„é™æ€åŠ¨ç”»è¿˜æ˜¯å¤æ‚çš„äº¤äº’å¼åŠ¨ç”»ï¼Œéƒ½èƒ½åœ¨è¿™ä¸ªå¹³å°ä¸Šæ‰¾åˆ°åˆé€‚çš„è§£å†³æ–¹æ¡ˆã€‚

é¡¹ç›®çš„æ ¸å¿ƒä¼˜åŠ¿åŒ…æ‹¬ï¼š
- **å…¨æ ˆå…¼å®¹**ï¼šæ”¯æŒæ‰€æœ‰ä¸»æµå‰ç«¯æ¡†æ¶
- **æ€§èƒ½å“è¶Š**ï¼šå¤šå±‚æ¬¡ä¼˜åŒ–ç­–ç•¥ç¡®ä¿æµç•…ä½“éªŒ
- **åŠŸèƒ½ä¸°å¯Œ**ï¼šä»åŸºç¡€æ’­æ”¾åˆ°é«˜çº§äº¤äº’åº”æœ‰å°½æœ‰
- **æ˜“äºä½¿ç”¨**ï¼šç®€æ´çš„ API è®¾è®¡å’Œå®Œå–„çš„æ–‡æ¡£

é€šè¿‡åˆç†çš„æ¶æ„è®¾è®¡å’ŒæŒç»­çš„æ€§èƒ½ä¼˜åŒ–ï¼Œ@ldesign/lottie ä¸ºç°ä»£ Web åº”ç”¨ç¨‹åºçš„åŠ¨ç”»éœ€æ±‚æä¾›äº†å¯é çš„æŠ€æœ¯ä¿éšœã€‚