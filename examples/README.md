# ğŸ¨ Lottie ç¤ºä¾‹é›†åˆ

å®Œæ•´çš„ç¤ºä¾‹å±•ç¤ºï¼Œæ¶µç›–æ‰€æœ‰æ¡†æ¶å’Œä½¿ç”¨æ–¹å¼ã€‚

---

## ğŸ“‹ ç¤ºä¾‹åˆ—è¡¨

### 1. æ¡†æ¶å¯¹æ¯”é¡µé¢ â­â­â­â­â­

**æ–‡ä»¶**: `all-frameworks.html`

**å†…å®¹**:
- ğŸ¯ æ‰€æœ‰æ¡†æ¶ç”¨æ³•å¯¹æ¯”
- ğŸ“Š åŠŸèƒ½å¯¹æ¯”è¡¨
- ğŸ’¡ é€‰æ‹©å»ºè®®
- ğŸ“ ä»£ç ç¤ºä¾‹

**å¦‚ä½•æŸ¥çœ‹**:
```bash
npm run example:all
# è®¿é—® http://localhost:5173/all-frameworks.html
```

---

### 2. Vue 3 å®Œæ•´ç¤ºä¾‹ â­â­â­â­â­

**æ–‡ä»¶**: `vue/src/App.vue`

**å±•ç¤ºå†…å®¹**:
1. âœ… useLottie Composable
2. âœ… useLottieInteractive Composable
3. âœ… useLottieSequence Composable
4. âœ… LottieAnimation ç»„ä»¶
5. âœ… LottiePlayer ç»„ä»¶
6. âœ… LottieSequence ç»„ä»¶
7. âœ… v-lottie æŒ‡ä»¤
8. âœ… v-lottie-hover æŒ‡ä»¤
9. âœ… v-lottie-scroll æŒ‡ä»¤

**å¦‚ä½•è¿è¡Œ**:
```bash
npm run example:vue
# è®¿é—® http://localhost:5173
```

**ç‰¹è‰²åŠŸèƒ½**:
- ğŸ¨ 9ç§ç”¨æ³•å®Œæ•´æ¼”ç¤º
- ğŸ“Š å®æ—¶çŠ¶æ€æ˜¾ç¤º
- ğŸ® äº¤äº’å¼æ§åˆ¶
- ğŸ“ äº‹ä»¶æ—¥å¿—

---

### 3. React å®Œæ•´ç¤ºä¾‹ â­â­â­â­â­

**æ–‡ä»¶**: `react/src/App.tsx`

**å±•ç¤ºå†…å®¹**:
1. âœ… useLottie Hook
2. âœ… useLottieInteractive Hook
3. âœ… useLottieSequence Hook
4. âœ… useLottieControls Hook
5. âœ… LottieAnimation ç»„ä»¶
6. âœ… LottiePlayer ç»„ä»¶
7. âœ… LottieSequence ç»„ä»¶
8. âœ… Context Provider

**å¦‚ä½•è¿è¡Œ**:
```bash
npm run example:react
# è®¿é—® http://localhost:5173
```

**ç‰¹è‰²åŠŸèƒ½**:
- ğŸª Hooks å®Œæ•´æ¼”ç¤º
- ğŸ¨ ç»„ä»¶åº“å±•ç¤º
- ğŸ”— Context å…¨å±€ç®¡ç†
- ğŸ“Š TypeScript ç±»å‹å®Œæ•´

---

### 4. Lit (Web Components) ç¤ºä¾‹ â­â­â­â­â­

**æ–‡ä»¶**: `lit/index.html`

**å±•ç¤ºå†…å®¹**:
1. âœ… <lottie-animation> åŸºç¡€ç”¨æ³•
2. âœ… <lottie-player> æ’­æ”¾å™¨
3. âœ… JavaScript æ§åˆ¶
4. âœ… äº‹ä»¶ç›‘å¬
5. âœ… åŠ¨æ€åˆ›å»º
6. âœ… å¤šå®ä¾‹

**å¦‚ä½•æŸ¥çœ‹**:
```bash
npm run example:lit
# è®¿é—® http://localhost:5173
```

**ç‰¹è‰²åŠŸèƒ½**:
- ğŸŒ æ ‡å‡† Web Components
- ğŸ“¦ æ¡†æ¶æ— å…³
- ğŸ”§ æ˜“äºé›†æˆ
- âœ¨ Shadow DOM

---

### 5. Vanilla JS ç¤ºä¾‹ â­â­â­â­â­

**æ–‡ä»¶**: `vanilla/src/main.ts`, `vanilla/advanced.html`

**å±•ç¤ºå†…å®¹**:
- âœ… åŸºç¡€åŠ¨ç”»æ§åˆ¶
- âœ… é€Ÿåº¦å’Œå¾ªç¯æ§åˆ¶
- âœ… å…¨å±€ç»Ÿè®¡
- âœ… åŠ¨ç”»åºåˆ—
- âœ… äº¤äº’æ§åˆ¶
- âœ… æ‰‹åŠ¿æ§åˆ¶

**å¦‚ä½•è¿è¡Œ**:
```bash
npm run example:vanilla
# è®¿é—® http://localhost:5173
```

---

### 6. æ€§èƒ½æµ‹è¯•å·¥å…· â­â­â­â­â­

**æ–‡ä»¶**: `performance-test.html`

**åŠŸèƒ½**:
- ğŸ“Š å®æ—¶æ€§èƒ½ç»Ÿè®¡
- ğŸ’¾ å†…å­˜ä½¿ç”¨ç›‘æ§
- ğŸ¬ æ‰¹é‡åŠ¨ç”»åŠ è½½æµ‹è¯•
- ğŸ“ æ€§èƒ½æ—¥å¿—è®°å½•
- ğŸ” æ€§èƒ½ç“¶é¢ˆåˆ†æ

**å¦‚ä½•æŸ¥çœ‹**:
```bash
# ç›´æ¥æ‰“å¼€
open examples/performance-test.html

# æˆ–é€šè¿‡æœåŠ¡å™¨
npm run example:all
# è®¿é—® http://localhost:5173/performance-test.html
```

**æµ‹è¯•åœºæ™¯**:
- 10ä¸ªåŠ¨ç”»
- 50ä¸ªåŠ¨ç”»
- 100ä¸ªåŠ¨ç”»
- å†…å­˜å‹åŠ›æµ‹è¯•
- æ€§èƒ½å¯¹æ¯”

---

## ğŸ¯ æ¨èå­¦ä¹ è·¯å¾„

### æ–°æ‰‹å…¥é—¨ (30åˆ†é’Ÿ)

```
1. all-frameworks.html  (10åˆ†é’Ÿ)
   â””â”€ äº†è§£æ‰€æœ‰æ¡†æ¶çš„ç”¨æ³•

2. é€‰æ‹©ä½ çš„æ¡†æ¶ç¤ºä¾‹  (15åˆ†é’Ÿ)
   â”œâ”€ Vue â†’ vue/
   â”œâ”€ React â†’ react/
   â”œâ”€ å…¶ä»– â†’ lit/
   â””â”€ åŸç”Ÿ â†’ vanilla/

3. è¿è¡Œç¤ºä¾‹æµ‹è¯•  (5åˆ†é’Ÿ)
   â””â”€ npm run example:[framework]
```

### è¿›é˜¶å­¦ä¹  (1å°æ—¶)

```
1. æ·±å…¥å­¦ä¹ æ¡†æ¶é€‚é…å™¨  (30åˆ†é’Ÿ)
   â””â”€ å°è¯•æ‰€æœ‰ä½¿ç”¨æ–¹å¼

2. æ€§èƒ½ä¼˜åŒ–åŠŸèƒ½  (20åˆ†é’Ÿ)
   â””â”€ performance-test.html

3. é«˜çº§åŠŸèƒ½  (10åˆ†é’Ÿ)
   â””â”€ vanilla/advanced.html
```

### ä¸“å®¶çº§åˆ« (2å°æ—¶)

```
1. é˜…è¯»æºä»£ç   (1å°æ—¶)
   â””â”€ src/adapters/

2. æ€§èƒ½æ·±åº¦ä¼˜åŒ–  (30åˆ†é’Ÿ)
   â””â”€ é›†æˆæ‰€æœ‰ä¼˜åŒ–åŠŸèƒ½

3. è‡ªå®šä¹‰æ‰©å±•  (30åˆ†é’Ÿ)
   â””â”€ åˆ›å»ºè‡ªå·±çš„é€‚é…å™¨
```

---

## ğŸ“š ç¤ºä¾‹ä»£ç ç‰‡æ®µ

### æœ€ç®€å•çš„ç”¨æ³•

```html
<!-- Web Components - æœ€ç®€å•ï¼ -->
<lottie-animation src="/animation.json"></lottie-animation>
```

### Vue 3 å¿«é€Ÿå¼€å§‹

```vue
<template>
  <!-- æŒ‡ä»¤æ–¹å¼ -->
  <div v-lottie="'/animation.json'" />

  <!-- æˆ–ç»„ä»¶æ–¹å¼ -->
  <LottieAnimation path="/animation.json" />
</template>
```

### React å¿«é€Ÿå¼€å§‹

```tsx
// ç»„ä»¶æ–¹å¼
<LottieAnimation path="/animation.json" loop autoplay />

// æˆ– Hook æ–¹å¼
const { containerRef, play } = useLottie({ path: '/animation.json' })
<div ref={containerRef} />
```

### å®Œæ•´ä¼˜åŒ–ç¤ºä¾‹

```typescript
import {
  createLottie,
  VirtualRenderer,
  memoryManager,
  workerManager,
  AdaptiveFrameRate
} from '@ldesign/lottie'

// Worker åŠ é€ŸåŠ è½½
const data = await workerManager.parseAnimation(jsonString, {
  removeHiddenLayers: true,
  roundValues: true
})

// åˆ›å»ºåŠ¨ç”»
const animation = createLottie({
  container: '#lottie',
  animationData: data,
  autoplay: true
})

// è™šæ‹ŸåŒ–æ¸²æŸ“
const virtualRenderer = new VirtualRenderer()
virtualRenderer.register(animation)

// å†…å­˜ç›‘æ§
memoryManager.startMonitoring()

// è‡ªé€‚åº”å¸§ç‡
new AdaptiveFrameRate(animation, {
  targetFPS: 60,
  minFPS: 20
})
```

---

## ğŸ® äº¤äº’å¼åŠŸèƒ½æ¼”ç¤º

### åŠ¨ç”»åºåˆ—

æ‰€æœ‰æ¡†æ¶éƒ½æ”¯æŒï¼š

```typescript
// Vue
const sequence = useLottieSequence({ items: [...] })

// React  
<LottieSequence items={[...]} />

// Vanilla JS
const seq = new AnimationSequence()
seq.add({ config: { path: '/anim1.json' } })
seq.add({ config: { path: '/anim2.json' }, delay: 500 })
await seq.play()
```

### äº¤äº’æ§åˆ¶

æ‰€æœ‰æ¡†æ¶éƒ½æ”¯æŒï¼š

```typescript
// Vue
const lottie = useLottieInteractive({
  path: '/animation.json',
  enableClick: true,
  enableHover: true,
  enableDrag: true
})

// React
const lottie = useLottieInteractive({ ... })

// Vanilla JS
new InteractiveController({
  instance: animation,
  enableClick: true,
  enableHover: true
})
```

---

## ğŸ“Š æ€§èƒ½å¯¹æ¯”æ¼”ç¤º

### æµ‹è¯•æ–¹æ³•

1. æ‰“å¼€ `performance-test.html`
2. ç‚¹å‡»"åŠ è½½ 50 ä¸ªåŠ¨ç”»"
3. è§‚å¯Ÿæ€§èƒ½æŒ‡æ ‡ï¼š
   - å†…å­˜ä½¿ç”¨
   - å¯è§/éšè—å®ä¾‹
   - å¸§ç‡
   - Worker çŠ¶æ€

### é¢„æœŸç»“æœ

```
ä¼˜åŒ–å‰:
â”œâ”€ å†…å­˜: 850MB
â”œâ”€ å¸§ç‡: 25 FPS
â””â”€ å¡é¡¿: é¢‘ç¹

ä¼˜åŒ–å:
â”œâ”€ å†…å­˜: 280MB  (â¬‡ï¸ 67%)
â”œâ”€ å¸§ç‡: 55 FPS  (â¬†ï¸ 120%)
â””â”€ å¡é¡¿: æ— 
```

---

## ğŸ”§ å¼€å‘å»ºè®®

### æ¨èå·¥ä½œæµ

```
1. åŸå‹å¼€å‘
   â””â”€ ä½¿ç”¨æœ€ç®€å•çš„æ–¹å¼ (æŒ‡ä»¤/ç»„ä»¶)

2. åŠŸèƒ½å¼€å‘
   â””â”€ ä½¿ç”¨ Composable/Hook

3. æ€§èƒ½ä¼˜åŒ–
   â””â”€ å¯ç”¨æ€§èƒ½ä¼˜åŒ–åŠŸèƒ½

4. ç”Ÿäº§éƒ¨ç½²
   â””â”€ å¯ç”¨æ‰€æœ‰ä¼˜åŒ–ï¼Œç›‘æ§æ€§èƒ½
```

### è°ƒè¯•æŠ€å·§

```typescript
// 1. å¯ç”¨è¯¦ç»†æ—¥å¿—
localStorage.setItem('lottie_debug', 'true')

// 2. æŸ¥çœ‹æ€§èƒ½ç»Ÿè®¡
console.log(lottieManager.getGlobalStats())
console.log(memoryManager.getStats())
console.log(virtualRenderer.getStats())

// 3. ç›‘æ§å†…å­˜
memoryManager.onMemoryPressure((event) => {
  console.warn('Memory:', event.stats)
})
```

---

## ğŸŠ æ€»ç»“

### ç¤ºä¾‹å®Œæ•´æ€§

```
âœ… 5ä¸ªå®Œæ•´ç¤ºä¾‹
âœ… 16ç§ç”¨æ³•æ¼”ç¤º
âœ… æ‰€æœ‰åŠŸèƒ½è¦†ç›–
âœ… æ€§èƒ½æµ‹è¯•å·¥å…·
âœ… æ¡†æ¶å¯¹æ¯”é¡µé¢
```

### å­¦ä¹ èµ„æº

```
âœ… ä»£ç ç¤ºä¾‹ä¸°å¯Œ
âœ… æ³¨é‡Šè¯¦ç»†
âœ… çœŸå®åœºæ™¯
âœ… æœ€ä½³å®è·µ
âœ… æ€§èƒ½ä¼˜åŒ–å»ºè®®
```

### å³å­¦å³ç”¨

```
âœ… å¿«é€Ÿå¼€å§‹ < 5åˆ†é’Ÿ
âœ… åŸºç¡€æŒæ¡ < 30åˆ†é’Ÿ  
âœ… è¿›é˜¶å­¦ä¹  < 2å°æ—¶
âœ… ä¸“å®¶çº§åˆ« < 1å¤©
```

---

**ğŸ‰ å¼€å§‹æ¢ç´¢è¿™äº›ç²¾å½©çš„ç¤ºä¾‹å§ï¼**

**ğŸš€ äº«å—æœ€å¼ºå¤§çš„ Lottie åŠ¨ç”»ä½“éªŒï¼**

---

_æ›´æ–°æ—¶é—´: 2025-10-20_  
_ç¤ºä¾‹æ•°é‡: 6ä¸ª_  
_æ€»ä»£ç é‡: ~1,000è¡Œ_
